// Generated by CoffeeScript 1.3.3
(function() {
  var CMinion, MAXROUTES, Minion, director, helloWorld, http, i, port, r, router, server, _i;

  http = require("http");

  director = require("director");

  CMinion = require("../../minion");

  Minion = new CMinion();

  helloWorld = function() {
    this.res.writeHead(200, {
      'Content-Type': 'text/plain'
    });
    this.res.end("Hello World.");
    return Minion.logRequest(this.req, true);
  };

  router = new director.http.Router();

  server = http.createServer(function(req, res) {
    return router.dispatch(req, res, function(err) {
      if (err) {
        res.writeHead(404);
        return res.end();
      }
    });
  });

  MAXROUTES = process.env.MAXROUTES || 100000;

  for (i = _i = 0; 0 <= MAXROUTES ? _i <= MAXROUTES : _i >= MAXROUTES; i = 0 <= MAXROUTES ? ++_i : --_i) {
    r = "/" + i;
    router.get(r, helloWorld);
  }

  Minion.started();

  port = process.env.PORT || 3000;

  server.listen(port);

}).call(this);
